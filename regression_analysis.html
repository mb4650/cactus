<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Statistical Analyses</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="about.html">About the Members</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="project_report.html">Project Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Interactive Dashboard Visualizations
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="create_shiny.html">Report on Creating Interactive Plots</a>
    </li>
    <li>
      <a href="https://mb4650.shinyapps.io/plotly/">View Interactive Shiny Dashboard</a>
    </li>
  </ul>
</li>
<li>
  <a href="descriptive_plotly.html">Descriptives</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Predictive Models
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="regression_analysis.html">Regression Analysis</a>
    </li>
    <li>
      <a href="https://gaurib2685.shinyapps.io/predictive_interactive_map/">Predictive Tool</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://github.com/mb4650/cactus">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Statistical Analyses</h1>

</div>


<div id="create-datasets" class="section level2">
<h2>Create datasets</h2>
<div id="create-datasets-with-noaa-data" class="section level3">
<h3>Create datasets with noaa data</h3>
<p>The noaa dataset that we used was from the <a href="https://www.ncdc.noaa.gov/cag/statewide/mapping">ncdc.noaa.gov</a> website. We retrieved 4 individual datasets from the noaa website. The retrieved dataset includes: 1. tmax: Data for the maximum temperature for each state by month. 2. tmin: Data for the minimum temperature for each state by month. 3. tavg: Data for the average temperaure for each state by month. 4. prcp: Data for the precipitation values for each state by month.</p>
<p>The datasets were scraped from the website using read_csv and were then merged with the <code>COVID19</code> dataset by month and state.</p>
</div>
<div id="import-covid-19-dataset.-clean-and-tidy-data" class="section level3">
<h3>Import COVID-19 dataset. Clean and tidy data</h3>
<p>The COVID-19 dataset was imported using the <code>COVID19</code> R package. COVID-19 data was obtained from the <code>COVID19</code> package. This function has arguments set to return data at the state level. This dataset included information on the date, state, as well as the number of cases, tests, and hospitalizations for that given day.</p>
</div>
<div id="merging-the-two-datasets" class="section level3">
<h3>Merging the two datasets</h3>
<p>The final dataset has information on average temperature, total precipitation, maximum and minimum temperature as the main climate variables along with COVID-19 data related to the case counts, information about school gathering, workplace gathering, contact tracing and testing, which are important COVID-19 related variables used in the analysis.</p>
</div>
</div>
<div id="model-1" class="section level2">
<h2>Model 1</h2>
<div id="hypothesis" class="section level3">
<h3>Hypothesis</h3>
<p>Our team hypothesizes that temperature and COVID-19 cases are associated, wherein the number of new cases rises with a decrease in temperature. We have looked at the trends in COVID-19 and Climate in the United States. Check out our interactive map here <a href="https://mb4650.shinyapps.io/plotly/#section-trends-in-covid-and-climate-in-us-between-jan-2020-and-oct-2020">Trends in COVID-19 and Climate in US Between Jan 2020 and Oct 2020</a>. We want to conduct an analysis to see if cases increase with increase in temperature.</p>
</div>
<div id="relevant-predictors" class="section level3">
<h3>Relevant predictors</h3>
<p>The following are the relevant predictors we want to include in the model</p>
<ul>
<li><code>new_cases</code> - The number of new cases in every month</li>
<li><code>case_count</code> - The total number of cases in every month</li>
<li><code>population</code> - Total population of each state - This forms the offset variable in the Poisson regression model and the denominator for the count to extrapolate the rate</li>
<li><code>state_name</code> - All the states in the US</li>
<li><code>state_tavg</code> - The average temperature in a state in a month</li>
<li><code>state_tmax</code> - The maximum temperature in a state in a month</li>
<li><code>state_tmin</code> - The minimum temperature in a state in a month</li>
<li><code>state_total_prcp</code> - The total precipitation in a state in a month</li>
</ul>
</div>
<div id="assessing-crude-correlation-among-our-selected-variables" class="section level3">
<h3>Assessing crude correlation among our selected variables</h3>
<pre class="r"><code>library(MASS)
covid_noaa_dataset_cor =
covid_noaa_dataset %&gt;%
  dplyr::select(new_cases, state_tavg, state_tmax, state_tmin, state_total_prcp)

  covid_noaa_dataset_cor[,3:7] %&gt;%
  cor() %&gt;%
  corrplot::corrplot(type = &quot;lower&quot;,
                     method = &quot;square&quot;,
                     addCoef.col = &quot;red&quot;,
                     diag = FALSE,
                     number.cex = .6,
                     tl.col = &quot;red&quot;,
                     tl.cex = .9,
                     tl.srt = 45,
                     is.corr = FALSE)</code></pre>
<p><img src="regression_analysis_files/figure-html/correlation-1.png" width="90%" /></p>
<p>In order to select the most significant variables in our model, we first conducted a crude correlation assessment using a correlation matrix as shown above. From this assessment, we decided to remove <code>state_tmax</code> and <code>state_tmin</code> since the r is 0.97 - 0.99, indicating that there is an extreme co-linearity among other predictors.</p>
</div>
<div id="confounding" class="section level3">
<h3>Confounding</h3>
<p>There are many variables that would confound the relationship between temperature and case count. We have included ones that we felt are the most important. However, in order to maintain a parsimonious model, we restricted the number of predictors. This could also be a limitation of our model.</p>
</div>
<div id="modeling---poisson-vs-negative-binomial-regression" class="section level3">
<h3>Modeling - Poisson vs Negative binomial regression</h3>
<p>Our outcome variable is a count variable, hence we want to model either a Poisson regression or a negative binomial regression.</p>
<p>A Poisson distribution assumes that the mean and variance are the same. Sometimes the data shows extra variation that is greater than the mean. This situation is called overdispersion. Negative binomial is more flexible in that regard. Negative binomial has one more parameter that adjusts for the variance independently from the mean.</p>
<p>In order to decide which model to use, we cross validated between the two models to see the distribution. We also assessed the AIC to determine the model with the smaller AIC.</p>
<pre class="r"><code>poisson_mod = glm(new_cases ~  as.factor(month_name) + state + state_tavg + state_total_prcp,
                    family = &quot;poisson&quot;(link = &quot;log&quot;), data = covid_noaa_dataset)



neg_bin_mod = glm.nb(new_cases ~ as.factor(month_name) + state + state_tavg + state_total_prcp,
                            data = covid_noaa_dataset)</code></pre>
<p>AIC for both the models are below -</p>
<pre class="r"><code>poisson_mod %&gt;%
  broom::glance() %&gt;%
  dplyr::select(AIC) %&gt;%
  knitr::kable(digits = 4)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">AIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2593050</td>
</tr>
</tbody>
</table>
<pre class="r"><code>neg_bin_mod %&gt;%
  broom::glance() %&gt;%
  dplyr::select(AIC) %&gt;%
  knitr::kable(digits = 4)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">AIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">8357.088</td>
</tr>
</tbody>
</table>
</div>
<div id="cross-validation" class="section level3">
<h3>Cross validation</h3>
<pre class="r"><code>count_cv =
  crossv_mc(covid_noaa_dataset, 100)

count_cv =
  count_cv %&gt;%
  mutate(  
    poisson = map(train, ~glm(new_cases ~  as.factor(month) + state + state_tavg + state_total_prcp,
                                    family=&quot;poisson&quot; (link = log), data = covid_noaa_dataset)),
    neg_binomial = map(train, ~ glm.nb(new_cases ~  as.factor(month) + state + state_tavg + state_total_prcp,
                                             data = covid_noaa_dataset))
    ) %&gt;%
  
  mutate(
    rmse_poisson = map2_dbl(poisson, test, ~rmse(model = .x, data = .y)),
    rmse_negative_binomial = map2_dbl(neg_binomial, test, ~rmse(model = .x, data = .y))
    )

count_cv %&gt;%
  dplyr::select(starts_with(&quot;rmse&quot;)) %&gt;%
  pivot_longer(
    everything(),
    names_to = &quot;model&quot;,
    values_to = &quot;rmse&quot;,
    names_prefix = &quot;rmse_&quot;) %&gt;%
  mutate(model = fct_inorder(model)) %&gt;%
  ggplot(aes(x = model, y = rmse)) + geom_violin() +
  labs(
    title = &quot;Variation Distributions&quot;
  )</code></pre>
<p><img src="regression_analysis_files/figure-html/cross%20validation-1.png" width="90%" /></p>
<p>From the distribution above, we can see that both the figures are very similar to each other. Solely based on this distribution, we cannot base our decision to use either of the models. Hence we look at the AIC.</p>
<p>The Poisson model has an AIC of 2593050 The negative binomial model has an AIC of 8357.088</p>
<p>Since the negative binomial model has a smaller AIC than the Poisson model, we chose the negative binomial model.</p>
</div>
<div id="results-1" class="section level3">
<h3>Results 1</h3>
<pre class="r"><code>nb_output = neg_bin_mod %&gt;%
  broom::tidy() %&gt;%
  dplyr::select(term, estimate, p.value) %&gt;%
  mutate(exp(estimate)) 

nb_output %&gt;% 
  knitr::kable(digits = 3)</code></pre>
<p>Our results show that the number of case counts significantly decrease with increase in temperature. However, the case counts do not show a significant association with the total precipitation when adjusted for month and states. With every degree Fahrenheit increase in average temperature, the number of cases decreases by 4.3%. This association is significant at the 5% level of significance. This supports our hypothesis that the number of cases would rise with a decrease in temperature. Therefore, there is a possibility that we would expect more cases in winter.</p>
</div>
</div>
<div id="model-2" class="section level2">
<h2>Model 2</h2>
<p>There could also be other factors that can influence this relationship, such as governmental restrictions and public health campaigns and discourse. To account for this, we included variables such as school closures, work place closures, and gathering restrictions into our second model.</p>
<div id="data-for-model-2" class="section level3">
<h3>Data for Model 2</h3>
<p>This dataset filters out the variables required for the second model which assesses the influence of school closures, workplace closures, and gathering restrictions on the case counts.</p>
<pre class="r"><code>ct_school_work_gather = 
  covid_noaa_dataset %&gt;%
  dplyr::select(date, case_count, new_cases, population, school_closing, workplace_closing, gatherings_restrictions, state, state_name, state_tavg, month_name) %&gt;% 
  mutate(
    school_closing = as.factor(school_closing),
    workplace_closing = as.factor(workplace_closing),
    gatherings_restrictions = as.factor(gatherings_restrictions)
  )</code></pre>
</div>
<div id="hypothesis-1" class="section level3">
<h3>Hypothesis</h3>
<p>In our initial hypotheses, we have established that there is a negative association between the temperature and COVID-19 cases. We now want to see if this relationship would change with certain events such as school closures, workplace closures, and gathering.</p>
</div>
<div id="relevant-predictors-1" class="section level3">
<h3>Relevant predictors</h3>
<p>The following are the relevant predictors we want to include in the model:</p>
<ul>
<li><code>new_cases</code>- The number of new cases in every month</li>
<li><code>case_count</code> - The total number of cases in every month</li>
<li><code>population</code>- Total population of each state - This forms the offset variable in the Poisson regression model and the denominator for the count to extrapolate the rate</li>
<li><code>state_name</code>- All the states in the US</li>
<li><code>state_tavg</code>- The average temperature in a state in a month</li>
<li><code>school_closing</code>- 0: No measures - 1: Recommend closing - 2: Require closing (only some levels or categories, e.g. just high school, or just public schools - 3: Require closing all levels</li>
<li><code>workplace_closing</code>- 0: No measures - 1: Recommend closing (or work from home) - 2: Require closing for some sectors or categories of workers - 3: Require closing (or work from home) all-but-essential workplaces (e.g. grocery stores, doctors)</li>
<li><code>gatherings_restriction</code> - 0: No restrictions - 1: Restrictions on very large gatherings (the limit is above 1000 people) - 2: Restrictions on gatherings between 100-1000 people - 3: Restrictions on gatherings between 10-100 people - 4: Restrictions on gatherings of less than 10 people</li>
</ul>
</div>
<div id="assessing-crude-correlation-among-our-selected-variables-1" class="section level3">
<h3>Assessing crude correlation among our selected variables</h3>
<pre class="r"><code>covid_noaa_dataset_cor_2 =
ct_school_work_gather %&gt;%
  dplyr::select(new_cases, state_tavg, school_closing, workplace_closing, gatherings_restrictions)

cor_plot = 
  covid_noaa_dataset_cor_2[,3:7] %&gt;%
  hetcor() %&gt;%
  as.matrix() %&gt;% 
  as.data.frame() </code></pre>
<pre class="r"><code> cor_plot %&gt;%
  knitr::kable(digits = 3)</code></pre>
<table>
<colgroup>
<col width="23%" />
<col width="9%" />
<col width="10%" />
<col width="14%" />
<col width="17%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">new_cases</th>
<th align="right">state_tavg</th>
<th align="right">school_closing</th>
<th align="right">workplace_closing</th>
<th align="right">gatherings_restrictions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">new_cases</td>
<td align="right">1.000</td>
<td align="right">0.368</td>
<td align="right">0.410</td>
<td align="right">0.234</td>
<td align="right">0.150</td>
</tr>
<tr class="even">
<td align="left">state_tavg</td>
<td align="right">0.368</td>
<td align="right">1.000</td>
<td align="right">0.610</td>
<td align="right">0.704</td>
<td align="right">0.331</td>
</tr>
<tr class="odd">
<td align="left">school_closing</td>
<td align="right">0.410</td>
<td align="right">0.610</td>
<td align="right">1.000</td>
<td align="right">0.852</td>
<td align="right">0.537</td>
</tr>
<tr class="even">
<td align="left">workplace_closing</td>
<td align="right">0.234</td>
<td align="right">0.704</td>
<td align="right">0.852</td>
<td align="right">1.000</td>
<td align="right">0.405</td>
</tr>
<tr class="odd">
<td align="left">gatherings_restrictions</td>
<td align="right">0.150</td>
<td align="right">0.331</td>
<td align="right">0.537</td>
<td align="right">0.405</td>
<td align="right">1.000</td>
</tr>
</tbody>
</table>
<p>We decided to keep school closing and work place closing even with a large R-square value because they are important variables.</p>
</div>
<div id="modeling---negative-binomial-regression" class="section level3">
<h3>Modeling - Negative binomial regression</h3>
<p>Our outcome variable is a count variable, hence we want to model a negative binomial regression.</p>
<p>We decided to use the same modeling technique to run a regression analysis.</p>
<pre class="r"><code>neg_bin_mod_policy = glm.nb(new_cases ~  month_name + state_name + as.factor(school_closing) + as.factor(workplace_closing) + as.factor(gatherings_restrictions) + state_tavg,
                            data = covid_noaa_dataset)</code></pre>
</div>
<div id="results-for-the-second-model" class="section level3">
<h3>Results for the second model</h3>
<pre class="r"><code>nb_output_policy = neg_bin_mod_policy %&gt;%
  broom::tidy() %&gt;%
  dplyr::select(term, estimate, p.value) %&gt;%
  mutate(exp(estimate)) 

nb_output_policy %&gt;% 
  knitr::kable(digits = 3)</code></pre>
<p>We found a significant association between the number of new case counts and workplace restrictions, at the 5% level of significance. Our second model suggests that the number of case counts decreases for required closing of some sectors of workplaces as compared to no workplace restriction measures by 30%. With every degree Fahrenheit increase in average temperature, the number of cases decrease by 3.7%, adjusting for school, workplace and gathering restrictions. This association is significant at the 5% level of significance. This supports our hypothesis that the number of cases would rise with decrease in temperature.</p>
</div>
</div>
<div id="model-3" class="section level2">
<h2>Model 3</h2>
<div id="data-for-model-3" class="section level3">
<h3>Data for Model 3</h3>
<p>This dataset filters out the variables required for the second model which assesses the influence of information campaigns, testing policies, and contact tracing policies on case counts.</p>
<pre class="r"><code>ct_infoc_test_tract = 
  covid_noaa_dataset %&gt;%
  dplyr::select(date, case_count, new_cases, population, information_campaigns, testing_policy, contact_tracing, state, state_name, state_tavg, month_name) %&gt;%
  mutate(
    information_campaigns = as.factor(information_campaigns),
    testing_policy = as.factor(testing_policy),
    contact_tracing = as.factor(contact_tracing)
  )</code></pre>
</div>
<div id="hypothesis-2" class="section level3">
<h3>Hypothesis</h3>
<p>In our initial hypotheses, we have established that there is a negative association between temperature and COVID-19 cases. We now want to see if this relationship would change with certain policies such as information campaigns, testing policies, and contact tracing policies.</p>
</div>
<div id="relevant-predictors-2" class="section level3">
<h3>Relevant predictors</h3>
<p>The following are the relevant predictors we want to include in the model:</p>
<ul>
<li><code>new_cases</code>- The number of new cases in every month</li>
<li><code>case_count</code> - The total number of cases in every month</li>
<li><code>population</code>- Total population of each state - This forms the offset variable in the Poisson regression model and the denominator for the count to extrapolate the rate</li>
<li><code>state_name</code>- All the states in the US</li>
<li><code>state_tavg</code>- The average temperature in a state in a month</li>
<li><code>information_campaigns</code>- 0: No COVID-19 public information campaign - 1: Public officials urging caution about COVID-19 - 2: Coordinated public information campaign (e.g. across traditional and social media)</li>
<li><code>testing_policy</code>- 0: No testing policy - 1: Only those who both (a) have symptoms AND (b) meet specific criteria (e.g. key workers, admitted to hospital, came into contact with a known case, returned from overseas) - 2: Testing of anyone showing COVID-19 symptoms - 3: Open public testing (e.g. “drive through” testing available to asymptomatic people)</li>
<li><code>contact_tracing</code> - 0: No contact tracing - 1: Limited contact tracing, not done for all cases - 2: Comprehensive contact tracing, done for all cases</li>
</ul>
</div>
<div id="assessing-the-crude-correlation-among-our-selected-variables" class="section level3">
<h3>Assessing the crude correlation among our selected variables</h3>
<pre class="r"><code>covid_noaa_dataset_cor_3 =
ct_infoc_test_tract %&gt;%
  dplyr::select(new_cases, state_tavg, information_campaigns,  contact_tracing)

cor_plot_2 =   
covid_noaa_dataset_cor_3[,3:6] %&gt;%
  hetcor() %&gt;%
  as.matrix() %&gt;% 
  as.data.frame() </code></pre>
<pre class="r"><code> cor_plot_2 %&gt;%
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">new_cases</th>
<th align="right">state_tavg</th>
<th align="right">information_campaigns</th>
<th align="right">contact_tracing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">new_cases</td>
<td align="right">1.000</td>
<td align="right">0.368</td>
<td align="right">0.846</td>
<td align="right">0.271</td>
</tr>
<tr class="even">
<td align="left">state_tavg</td>
<td align="right">0.368</td>
<td align="right">1.000</td>
<td align="right">0.830</td>
<td align="right">0.635</td>
</tr>
<tr class="odd">
<td align="left">information_campaigns</td>
<td align="right">0.846</td>
<td align="right">0.830</td>
<td align="right">1.000</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">contact_tracing</td>
<td align="right">0.271</td>
<td align="right">0.635</td>
<td align="right">NA</td>
<td align="right">1.000</td>
</tr>
</tbody>
</table>
<p>We decided to remove <code>testing_policy</code> from the model due to co-linearity with other predictors.</p>
</div>
<div id="modeling---negative-binomial-regression-1" class="section level3">
<h3>Modeling - Negative binomial regression</h3>
<p>Our outcome variable is a count variable, hence we want to model a negative binomial regression.</p>
<p>We decided to use the same modeling technique to run a regression analysis as the previous models.</p>
<pre class="r"><code>neg_bin_mod_public_health = glm.nb(new_cases ~  month_name + state_name + as.factor(information_campaigns) + as.factor(testing_policy) + as.factor(contact_tracing) + state_tavg,
                            data = ct_infoc_test_tract)</code></pre>
</div>
<div id="results-for-the-third-model" class="section level3">
<h3>Results for the third model</h3>
<pre class="r"><code>nb_output_public_health = neg_bin_mod_public_health %&gt;%
  broom::tidy() %&gt;%
  dplyr::select(term, estimate, p.value) %&gt;%
  mutate(exp(estimate)) 

nb_output_public_health %&gt;% 
  knitr::kable(digits = 3)</code></pre>
<p>We did not find a significant association between policies, such as information campaigns and contact tracing, and the number of new cases, while controlling for temperature. With every degree Fahrenheit increase in average temperature, the number of cases decrease by 4.3%, adjusting for information campaigns and contact tracing. This association is significant at the 5% level of significance. This supports our hypothesis that the number of cases would rise with decrease in temperature.</p>
</div>
<div id="limitations-for-the-models" class="section level3">
<h3>Limitations for the models</h3>
<p>We have not accounted for additional variables that could influence the results of association between temperature and number of new cases. Additionally, since we have already adjusted for state, the true association between policies and restrictions might not be reflected as they are specific to the state.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
